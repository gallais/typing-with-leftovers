\begin{figure}[H]
\begin{mathpar}
\inferrule
 { % premise 1
  \inferrule
   { % premise 2
    \inferrule
     { % premise 3
      \inferrule
       { % premise 4
      }{ % conclusion 4
        [] \ensuremath{\cdot} \fresh{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\vdash}_v \texttt{0} \ensuremath{\in} \ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau} \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}}
      }
    }{ % conclusion 3
       [] \ensuremath{\cdot} \fresh{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\vdash} \texttt{var}(\texttt{0}) \ensuremath{\in} \ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau} \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}}
     }
   \and % premise 2
    \inferrule
     { % premise 3
      \inferrule
       { % premise 4
      }{ % conclusion 4
        \ensuremath{\sigma} \ensuremath{\ni} \texttt{v} \leadsto{} [] \ensuremath{\cdot} \ensuremath{\sigma}
       }
     \and % premise 3
      \inferrule
       { % premise 4
      }{ % conclusion 4
        \ensuremath{\tau} \ensuremath{\ni} \texttt{v} \leadsto{} [] \ensuremath{\cdot} \ensuremath{\tau}
      }
    }{ % conclusion 3
      \ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau} \ensuremath{\ni} (\texttt{v, v}) \leadsto{} [] \ensuremath{\cdot} \ensuremath{\tau} \ensuremath{\cdot} \ensuremath{\sigma}
    }
   \and % premise 2
    \ensuremath{Pi}
  }{ % conslusion 2
    [] \ensuremath{\cdot} \fresh{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\vdash} \ensuremath{\tau} \ensuremath{\otimes} \ensuremath{\sigma} \ensuremath{\ni}
    {\begin{array}{l}
      \texttt{let}~(\texttt{v, v})~\ensuremath{\listcons}=~\texttt{var}~\texttt{0}~\texttt{in} \\
      \texttt{prd}(\texttt{neu}(\texttt{var}(\texttt{1})),~\texttt{neu}(\texttt{var}(\texttt{0})))
    \end{array}}
    \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}}
  }
}{ % conclusion 1
  [] \ensuremath{\vdash} (\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}) \ensuremath{\multimap} (\ensuremath{\tau} \ensuremath{\otimes} \ensuremath{\sigma}) \ensuremath{\ni} \texttt{swap} \andalso{} []
}

\and

\ensuremath{Pi} = \inferrule
  { % premise 1
   \inferrule
    { % premise 2
     \inferrule
      { % premise 3
       \inferrule
        { % premise 4
         \inferrule
          { % premise 5
         }{ % conclusion 5
           [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\tau}} \ensuremath{\vdash}_v \texttt{0} \ensuremath{\in} \ensuremath{\tau} \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}}
         }
       }{ % conclusion 4
         [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}} \ensuremath{\vdash}_v \texttt{1} \ensuremath{\in} \ensuremath{\tau}
          \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}}
       }
     }{ % conclusion 3
       [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}} \ensuremath{\vdash} \texttt{var}(\texttt{1}) \ensuremath{\in} \ensuremath{\tau}
       \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}}
     }
   }{ % conclusion 2
     [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}} \ensuremath{\vdash} \ensuremath{\tau} \ensuremath{\ni} \texttt{neu}(\texttt{var}(\texttt{1}))
     \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}}
   }
  \and \ensuremath{Pi}'
 }{ % conclusion 3
   [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}} \ensuremath{\vdash} \ensuremath{\tau} \ensuremath{\otimes} \ensuremath{\sigma} \ensuremath{\ni}
   \texttt{prd}(\texttt{neu}(\texttt{var}(\texttt{1})),~\texttt{neu}(\texttt{var}(\texttt{0}))
   \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\sigma}}
 }

\and

\ensuremath{Pi}' =  \inferrule
  { % premise 1
   \inferrule
    { % premise 2
     \inferrule
      { % premise 3
     }{ % conclusion 3
       [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}} \ensuremath{\vdash}_v \texttt{0} \ensuremath{\in} \ensuremath{\sigma}
       \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\sigma}}
     }
   }{ % conclusion 2
     [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}} \ensuremath{\vdash} \texttt{var}(\texttt{0}) \ensuremath{\in} \ensuremath{\sigma}
     \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\sigma}}
   }
 }{ % conclusion 1
   [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \fresh{\ensuremath{\sigma}} \ensuremath{\vdash} \ensuremath{\sigma} \ensuremath{\ni} \texttt{neu}(\texttt{var}(\texttt{0}))
   \andalso{} [] \ensuremath{\cdot} \stale{\ensuremath{\sigma} \ensuremath{\otimes} \ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\tau}} \ensuremath{\cdot} \stale{\ensuremath{\sigma}}
 }

\end{mathpar}
\label{typing:swap}
\end{figure}
