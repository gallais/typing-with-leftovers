\appendix{Typing derivation for \texttt{swap}}
\label{typing:swap}
\begin{mathpar}
\inferrule
 { % premise 1
  \inferrule
   { % premise 2
    \inferrule
     { % premise 3
      \inferrule
       { % premise 4
      }{ % conclusion 4
        [] ∙ \fresh{σ ⊗ τ} ⊢ \texttt{zero} ∈ σ ⊗ τ ⊠ [] ∙ \stale{σ ⊗ τ}
      }
    }{ % conclusion 3
       [] ∙ \fresh{σ ⊗ τ} ⊢ \texttt{var}(\texttt{zero}) ∈ σ ⊗ τ ⊠ [] ∙ \stale{σ ⊗ τ}
     }
   \and % premise 2
    \inferrule
     { % premise 3
      \inferrule
       { % premise 4
      }{ % conclusion 4
        σ ∋ \texttt{v} \leadsto{} [] ∙ σ
       }
     \and % premise 3
      \inferrule
       { % premise 4
      }{ % conclusion 4
        τ ∋ \texttt{v} \leadsto{} [] ∙ τ
      }
    }{ % conclusion 3
      σ ⊗ τ ∋ (\texttt{v, v}) \leadsto{} [] ∙ τ ∙ σ
    }
   \and % premise 2
    Π
  }{ % conslusion 2
    [] ∙ \fresh{σ ⊗ τ} ⊢ τ ⊗ σ ∋
    {\begin{array}{l}
      \texttt{let}~(\texttt{v, v})~∷=~\texttt{var}~\texttt{zero}~\texttt{in} \\
      \texttt{prd}(\texttt{neu}(\texttt{var}(1)),~\texttt{neu}(\texttt{var}(0)))
    \end{array}}
    ⊠ [] ∙ \stale{σ ⊗ τ}
  }
}{ % conclusion 1
  [] ⊢ (σ ⊗ τ) ⊸ (τ ⊗ σ) ∋ \texttt{swap} ⊠ []
}

\and

Π = \inferrule
  { % premise 1
   \inferrule
    { % premise 2
     \inferrule
      { % premise 3
       \inferrule
        { % premise 4
         \inferrule
          { % premise 5
         }{ % conclusion 5
           [] ∙ \fresh{τ} ⊢ 0 ∈ τ ⊠ [] ∙ \stale{τ}
         } 
       }{ % conclusion 4
         [] ∙ \fresh{τ} ∙ \fresh{σ} ⊢ 1 ∈ τ
          ⊠ [] ∙ \stale{τ} ∙ \fresh{σ}
       } 
     }{ % conclusion 3
       [] ∙ \fresh{τ} ∙ \fresh{σ} ⊢ \texttt{var}(1) ∈ τ
       ⊠ [] ∙ \stale{τ} ∙ \fresh{σ}
     } 
   }{ % conclusion 2
     [] ∙ \fresh{τ} ∙ \fresh{σ} ⊢ τ ∋ \texttt{neu}(\texttt{var}(1))
     ⊠ [] ∙ \stale{τ} ∙ \fresh{σ}
   }
  \and % premise 1
   \inferrule
    { % premise 2
     \inferrule
      { % premise 3
     }{ % conclusion 3
       [] ∙ \stale{τ} ∙ \fresh{σ} ⊢ 0 ∈ σ
       ⊠ [] ∙ \stale{τ} ∙ \stale{σ}
     }
   }{ % conclusion 2
     [] ∙ \stale{τ} ∙ \fresh{σ} ⊢ \texttt{var}(0) ∈ σ
     ⊠ [] ∙ \stale{τ} ∙ \stale{σ}
   }
 }{ % conclusion 1
   [] ∙ \fresh{τ} ∙ \fresh{σ} ⊢ τ ⊗ σ ∋
   \texttt{prd}(\texttt{neu}(\texttt{var}(1)),~\texttt{neu}(\texttt{var}(0))
   ⊠ [] ∙ \stale{τ} ∙ \stale{σ}
 }
\end{mathpar}
