<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>IO</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- IO</a>
<a id="112" class="Comment">------------------------------------------------------------------------</a>

<a id="186" class="Keyword">module</a> <a id="193" href="IO.html" class="Module">IO</a> <a id="196" class="Keyword">where</a>

<a id="203" class="Keyword">open</a> <a id="208" class="Keyword">import</a> <a id="215" href="Coinduction.html" class="Module">Coinduction</a>
<a id="227" class="Keyword">open</a> <a id="232" class="Keyword">import</a> <a id="239" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="249" class="Keyword">open</a> <a id="254" class="Keyword">import</a> <a id="261" href="Data.String.html" class="Module">Data.String</a>
<a id="273" class="Keyword">open</a> <a id="278" class="Keyword">import</a> <a id="285" href="Data.Colist.html" class="Module">Data.Colist</a>
<a id="297" class="Keyword">open</a> <a id="302" class="Keyword">import</a> <a id="309" href="Function.html" class="Module">Function</a>
<a id="318" class="Keyword">import</a> <a id="325" href="IO.Primitive.html" class="Module">IO.Primitive</a> <a id="338" class="Symbol">as</a> <a id="341" class="Module">Prim</a>
<a id="346" class="Keyword">open</a> <a id="351" class="Keyword">import</a> <a id="358" href="Level.html" class="Module">Level</a>

<a id="365" class="Comment">------------------------------------------------------------------------</a>
<a id="438" class="Comment">-- The IO monad</a>

<a id="455" class="Comment">-- One cannot write &quot;infinitely large&quot; computations with the</a>
<a id="516" class="Comment">-- postulated IO monad in IO.Primitive without turning off the</a>
<a id="579" class="Comment">-- termination checker (or going via the FFI, or perhaps abusing</a>
<a id="644" class="Comment">-- something else). The following coinductive deep embedding is</a>
<a id="708" class="Comment">-- introduced to avoid this problem. Possible non-termination is</a>
<a id="773" class="Comment">-- isolated to the run function below.</a>

<a id="813" class="Keyword">infixl</a> <a id="820" class="Number">1</a> <a id="822" href="IO.html#IO._%3E%3E%3D_" class="InductiveConstructor Operator">_&gt;&gt;=_</a> <a id="828" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">_&gt;&gt;_</a>

<a id="834" class="Keyword">data</a> <a id="IO" href="IO.html#IO" class="Datatype">IO</a> <a id="842" class="Symbol">{</a><a id="843" href="IO.html#843" class="Bound">a</a><a id="844" class="Symbol">}</a> <a id="846" class="Symbol">(</a><a id="847" href="IO.html#847" class="Bound">A</a> <a id="849" class="Symbol">:</a> <a id="851" class="PrimitiveType">Set</a> <a id="855" href="IO.html#843" class="Bound">a</a><a id="856" class="Symbol">)</a> <a id="858" class="Symbol">:</a> <a id="860" class="PrimitiveType">Set</a> <a id="864" class="Symbol">(</a><a id="865" href="Agda.Primitive.html#suc" class="Primitive">suc</a> <a id="869" href="IO.html#843" class="Bound">a</a><a id="870" class="Symbol">)</a> <a id="872" class="Keyword">where</a>
  <a id="IO.lift" href="IO.html#IO.lift" class="InductiveConstructor">lift</a>   <a id="887" class="Symbol">:</a> <a id="889" class="Symbol">(</a><a id="890" href="IO.html#890" class="Bound">m</a> <a id="892" class="Symbol">:</a> <a id="894" href="Agda.Builtin.IO.html#IO" class="Postulate">Prim.IO</a> <a id="902" href="IO.html#847" class="Bound">A</a><a id="903" class="Symbol">)</a> <a id="905" class="Symbol">→</a> <a id="907" href="IO.html#IO" class="Datatype">IO</a> <a id="910" href="IO.html#847" class="Bound">A</a>
  <a id="IO.return" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="921" class="Symbol">:</a> <a id="923" class="Symbol">(</a><a id="924" href="IO.html#924" class="Bound">x</a> <a id="926" class="Symbol">:</a> <a id="928" href="IO.html#847" class="Bound">A</a><a id="929" class="Symbol">)</a> <a id="931" class="Symbol">→</a> <a id="933" href="IO.html#IO" class="Datatype">IO</a> <a id="936" href="IO.html#847" class="Bound">A</a>
  <a id="IO._&gt;&gt;=_" href="IO.html#IO._%3E%3E%3D_" class="InductiveConstructor Operator">_&gt;&gt;=_</a>  <a id="947" class="Symbol">:</a> <a id="949" class="Symbol">{</a><a id="950" href="IO.html#950" class="Bound">B</a> <a id="952" class="Symbol">:</a> <a id="954" class="PrimitiveType">Set</a> <a id="958" href="IO.html#843" class="Bound">a</a><a id="959" class="Symbol">}</a> <a id="961" class="Symbol">(</a><a id="962" href="IO.html#962" class="Bound">m</a> <a id="964" class="Symbol">:</a> <a id="966" href="Agda.Builtin.Coinduction.html#%E2%88%9E" class="Record">∞</a> <a id="968" class="Symbol">(</a><a id="969" href="IO.html#IO" class="Datatype">IO</a> <a id="972" href="IO.html#950" class="Bound">B</a><a id="973" class="Symbol">))</a> <a id="976" class="Symbol">(</a><a id="977" href="IO.html#977" class="Bound">f</a> <a id="979" class="Symbol">:</a> <a id="981" class="Symbol">(</a><a id="982" href="IO.html#982" class="Bound">x</a> <a id="984" class="Symbol">:</a> <a id="986" href="IO.html#950" class="Bound">B</a><a id="987" class="Symbol">)</a> <a id="989" class="Symbol">→</a> <a id="991" href="Agda.Builtin.Coinduction.html#%E2%88%9E" class="Record">∞</a> <a id="993" class="Symbol">(</a><a id="994" href="IO.html#IO" class="Datatype">IO</a> <a id="997" href="IO.html#847" class="Bound">A</a><a id="998" class="Symbol">))</a> <a id="1001" class="Symbol">→</a> <a id="1003" href="IO.html#IO" class="Datatype">IO</a> <a id="1006" href="IO.html#847" class="Bound">A</a>
  <a id="IO._&gt;&gt;_" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">_&gt;&gt;_</a>   <a id="1017" class="Symbol">:</a> <a id="1019" class="Symbol">{</a><a id="1020" href="IO.html#1020" class="Bound">B</a> <a id="1022" class="Symbol">:</a> <a id="1024" class="PrimitiveType">Set</a> <a id="1028" href="IO.html#843" class="Bound">a</a><a id="1029" class="Symbol">}</a> <a id="1031" class="Symbol">(</a><a id="1032" href="IO.html#1032" class="Bound">m₁</a> <a id="1035" class="Symbol">:</a> <a id="1037" href="Agda.Builtin.Coinduction.html#%E2%88%9E" class="Record">∞</a> <a id="1039" class="Symbol">(</a><a id="1040" href="IO.html#IO" class="Datatype">IO</a> <a id="1043" href="IO.html#1020" class="Bound">B</a><a id="1044" class="Symbol">))</a> <a id="1047" class="Symbol">(</a><a id="1048" href="IO.html#1048" class="Bound">m₂</a> <a id="1051" class="Symbol">:</a> <a id="1053" href="Agda.Builtin.Coinduction.html#%E2%88%9E" class="Record">∞</a> <a id="1055" class="Symbol">(</a><a id="1056" href="IO.html#IO" class="Datatype">IO</a> <a id="1059" href="IO.html#847" class="Bound">A</a><a id="1060" class="Symbol">))</a> <a id="1063" class="Symbol">→</a> <a id="1065" href="IO.html#IO" class="Datatype">IO</a> <a id="1068" href="IO.html#847" class="Bound">A</a>

<a id="1071" class="Symbol">{-#</a> <a id="1075" class="Keyword">NON_TERMINATING</a> <a id="1091" class="Symbol">#-}</a>

<a id="run" href="IO.html#run" class="Function">run</a> <a id="1100" class="Symbol">:</a> <a id="1102" class="Symbol">∀</a> <a id="1104" class="Symbol">{</a><a id="1105" href="IO.html#1105" class="Bound">a</a><a id="1106" class="Symbol">}</a> <a id="1108" class="Symbol">{</a><a id="1109" href="IO.html#1109" class="Bound">A</a> <a id="1111" class="Symbol">:</a> <a id="1113" class="PrimitiveType">Set</a> <a id="1117" href="IO.html#1105" class="Bound">a</a><a id="1118" class="Symbol">}</a> <a id="1120" class="Symbol">→</a> <a id="1122" href="IO.html#IO" class="Datatype">IO</a> <a id="1125" href="IO.html#1109" class="Bound">A</a> <a id="1127" class="Symbol">→</a> <a id="1129" href="Agda.Builtin.IO.html#IO" class="Postulate">Prim.IO</a> <a id="1137" href="IO.html#1109" class="Bound">A</a>
<a id="1139" href="IO.html#run" class="Function">run</a> <a id="1143" class="Symbol">(</a><a id="1144" href="IO.html#IO.lift" class="InductiveConstructor">lift</a> <a id="1149" href="IO.html#1149" class="Bound">m</a><a id="1150" class="Symbol">)</a>   <a id="1154" class="Symbol">=</a> <a id="1156" href="IO.html#1149" class="Bound">m</a>
<a id="1158" href="IO.html#run" class="Function">run</a> <a id="1162" class="Symbol">(</a><a id="1163" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="1170" href="IO.html#1170" class="Bound">x</a><a id="1171" class="Symbol">)</a> <a id="1173" class="Symbol">=</a> <a id="1175" href="IO.Primitive.html#return" class="Postulate">Prim.return</a> <a id="1187" href="IO.html#1170" class="Bound">x</a>
<a id="1189" href="IO.html#run" class="Function">run</a> <a id="1193" class="Symbol">(</a><a id="1194" href="IO.html#1194" class="Bound">m</a>  <a id="1197" href="IO.html#IO._%3E%3E%3D_" class="InductiveConstructor Operator">&gt;&gt;=</a> <a id="1201" href="IO.html#1201" class="Bound">f</a><a id="1202" class="Symbol">)</a> <a id="1204" class="Symbol">=</a> <a id="1206" href="IO.Primitive.html#_%3E%3E%3D_" class="Postulate Operator">Prim._&gt;&gt;=_</a> <a id="1217" class="Symbol">(</a><a id="1218" href="IO.html#run" class="Function">run</a> <a id="1222" class="Symbol">(</a><a id="1223" href="Agda.Builtin.Coinduction.html#%E2%99%AD" class="Field">♭</a> <a id="1225" href="IO.html#1194" class="Bound">m</a> <a id="1227" class="Symbol">))</a> <a id="1230" class="Symbol">λ</a> <a id="1232" href="IO.html#1232" class="Bound">x</a> <a id="1234" class="Symbol">→</a> <a id="1236" href="IO.html#run" class="Function">run</a> <a id="1240" class="Symbol">(</a><a id="1241" href="Agda.Builtin.Coinduction.html#%E2%99%AD" class="Field">♭</a> <a id="1243" class="Symbol">(</a><a id="1244" href="IO.html#1201" class="Bound">f</a> <a id="1246" href="IO.html#1232" class="Bound">x</a><a id="1247" class="Symbol">))</a>
<a id="1250" href="IO.html#run" class="Function">run</a> <a id="1254" class="Symbol">(</a><a id="1255" href="IO.html#1255" class="Bound">m₁</a> <a id="1258" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">&gt;&gt;</a> <a id="1261" href="IO.html#1261" class="Bound">m₂</a><a id="1263" class="Symbol">)</a> <a id="1265" class="Symbol">=</a> <a id="1267" href="IO.Primitive.html#_%3E%3E%3D_" class="Postulate Operator">Prim._&gt;&gt;=_</a> <a id="1278" class="Symbol">(</a><a id="1279" href="IO.html#run" class="Function">run</a> <a id="1283" class="Symbol">(</a><a id="1284" href="Agda.Builtin.Coinduction.html#%E2%99%AD" class="Field">♭</a> <a id="1286" href="IO.html#1255" class="Bound">m₁</a><a id="1288" class="Symbol">))</a> <a id="1291" class="Symbol">λ</a> <a id="1293" href="IO.html#1293" class="Bound">_</a> <a id="1295" class="Symbol">→</a> <a id="1297" href="IO.html#run" class="Function">run</a> <a id="1301" class="Symbol">(</a><a id="1302" href="Agda.Builtin.Coinduction.html#%E2%99%AD" class="Field">♭</a> <a id="1304" href="IO.html#1261" class="Bound">m₂</a><a id="1306" class="Symbol">)</a>

<a id="1309" class="Comment">------------------------------------------------------------------------</a>
<a id="1382" class="Comment">-- Utilities</a>

<a id="sequence" href="IO.html#sequence" class="Function">sequence</a> <a id="1405" class="Symbol">:</a> <a id="1407" class="Symbol">∀</a> <a id="1409" class="Symbol">{</a><a id="1410" href="IO.html#1410" class="Bound">a</a><a id="1411" class="Symbol">}</a> <a id="1413" class="Symbol">{</a><a id="1414" href="IO.html#1414" class="Bound">A</a> <a id="1416" class="Symbol">:</a> <a id="1418" class="PrimitiveType">Set</a> <a id="1422" href="IO.html#1410" class="Bound">a</a><a id="1423" class="Symbol">}</a> <a id="1425" class="Symbol">→</a> <a id="1427" href="Data.Colist.html#Colist" class="Datatype">Colist</a> <a id="1434" class="Symbol">(</a><a id="1435" href="IO.html#IO" class="Datatype">IO</a> <a id="1438" href="IO.html#1414" class="Bound">A</a><a id="1439" class="Symbol">)</a> <a id="1441" class="Symbol">→</a> <a id="1443" href="IO.html#IO" class="Datatype">IO</a> <a id="1446" class="Symbol">(</a><a id="1447" href="Data.Colist.html#Colist" class="Datatype">Colist</a> <a id="1454" href="IO.html#1414" class="Bound">A</a><a id="1455" class="Symbol">)</a>
<a id="1457" href="IO.html#sequence" class="Function">sequence</a> <a id="1466" href="Data.Colist.html#Colist.%5B%5D" class="InductiveConstructor">[]</a>       <a id="1475" class="Symbol">=</a> <a id="1477" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="1484" href="Data.Colist.html#Colist.%5B%5D" class="InductiveConstructor">[]</a>
<a id="1487" href="IO.html#sequence" class="Function">sequence</a> <a id="1496" class="Symbol">(</a><a id="1497" href="IO.html#1497" class="Bound">c</a> <a id="1499" href="Data.Colist.html#Colist._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1501" href="IO.html#1501" class="Bound">cs</a><a id="1503" class="Symbol">)</a> <a id="1505" class="Symbol">=</a> <a id="1507" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1509" href="IO.html#1497" class="Bound">c</a>                  <a id="1528" href="IO.html#IO._%3E%3E%3D_" class="InductiveConstructor Operator">&gt;&gt;=</a> <a id="1532" class="Symbol">λ</a> <a id="1534" href="IO.html#1534" class="Bound">x</a>  <a id="1537" class="Symbol">→</a>
                    <a id="1559" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1561" class="Symbol">(</a><a id="1562" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1564" href="IO.html#sequence" class="Function">sequence</a> <a id="1573" class="Symbol">(</a><a id="1574" href="Agda.Builtin.Coinduction.html#%E2%99%AD" class="Field">♭</a> <a id="1576" href="IO.html#1501" class="Bound">cs</a><a id="1578" class="Symbol">)</a> <a id="1580" href="IO.html#IO._%3E%3E%3D_" class="InductiveConstructor Operator">&gt;&gt;=</a> <a id="1584" class="Symbol">λ</a> <a id="1586" href="IO.html#1586" class="Bound">xs</a> <a id="1589" class="Symbol">→</a>
                    <a id="1611" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1613" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="1620" class="Symbol">(</a><a id="1621" href="IO.html#1534" class="Bound">x</a> <a id="1623" href="Data.Colist.html#Colist._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1625" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1627" href="IO.html#1586" class="Bound">xs</a><a id="1629" class="Symbol">))</a>

<a id="1633" class="Comment">-- The reason for not defining sequence′ in terms of sequence is</a>
<a id="1698" class="Comment">-- efficiency (the unused results could cause unnecessary memory use).</a>

<a id="sequence′" href="IO.html#sequence%E2%80%B2" class="Function">sequence′</a> <a id="1780" class="Symbol">:</a> <a id="1782" class="Symbol">∀</a> <a id="1784" class="Symbol">{</a><a id="1785" href="IO.html#1785" class="Bound">a</a><a id="1786" class="Symbol">}</a> <a id="1788" class="Symbol">{</a><a id="1789" href="IO.html#1789" class="Bound">A</a> <a id="1791" class="Symbol">:</a> <a id="1793" class="PrimitiveType">Set</a> <a id="1797" href="IO.html#1785" class="Bound">a</a><a id="1798" class="Symbol">}</a> <a id="1800" class="Symbol">→</a> <a id="1802" href="Data.Colist.html#Colist" class="Datatype">Colist</a> <a id="1809" class="Symbol">(</a><a id="1810" href="IO.html#IO" class="Datatype">IO</a> <a id="1813" href="IO.html#1789" class="Bound">A</a><a id="1814" class="Symbol">)</a> <a id="1816" class="Symbol">→</a> <a id="1818" href="IO.html#IO" class="Datatype">IO</a> <a id="1821" class="Symbol">(</a><a id="1822" href="Level.html#Lift" class="Record">Lift</a> <a id="1827" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a><a id="1828" class="Symbol">)</a>
<a id="1830" href="IO.html#sequence%E2%80%B2" class="Function">sequence′</a> <a id="1840" href="Data.Colist.html#Colist.%5B%5D" class="InductiveConstructor">[]</a>       <a id="1849" class="Symbol">=</a> <a id="1851" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="1858" class="Symbol">_</a>
<a id="1860" href="IO.html#sequence%E2%80%B2" class="Function">sequence′</a> <a id="1870" class="Symbol">(</a><a id="1871" href="IO.html#1871" class="Bound">c</a> <a id="1873" href="Data.Colist.html#Colist._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1875" href="IO.html#1875" class="Bound">cs</a><a id="1877" class="Symbol">)</a> <a id="1879" class="Symbol">=</a> <a id="1881" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1883" href="IO.html#1871" class="Bound">c</a>                   <a id="1903" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">&gt;&gt;</a>
                     <a id="1927" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1929" class="Symbol">(</a><a id="1930" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1932" href="IO.html#sequence%E2%80%B2" class="Function">sequence′</a> <a id="1942" class="Symbol">(</a><a id="1943" href="Agda.Builtin.Coinduction.html#%E2%99%AD" class="Field">♭</a> <a id="1945" href="IO.html#1875" class="Bound">cs</a><a id="1947" class="Symbol">)</a> <a id="1949" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">&gt;&gt;</a>
                     <a id="1973" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="1975" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="1982" class="Symbol">_)</a>

<a id="mapM" href="IO.html#mapM" class="Function">mapM</a> <a id="1991" class="Symbol">:</a> <a id="1993" class="Symbol">∀</a> <a id="1995" class="Symbol">{</a><a id="1996" href="IO.html#1996" class="Bound">a</a> <a id="1998" href="IO.html#1998" class="Bound">b</a><a id="1999" class="Symbol">}</a> <a id="2001" class="Symbol">{</a><a id="2002" href="IO.html#2002" class="Bound">A</a> <a id="2004" class="Symbol">:</a> <a id="2006" class="PrimitiveType">Set</a> <a id="2010" href="IO.html#1996" class="Bound">a</a><a id="2011" class="Symbol">}</a> <a id="2013" class="Symbol">{</a><a id="2014" href="IO.html#2014" class="Bound">B</a> <a id="2016" class="Symbol">:</a> <a id="2018" class="PrimitiveType">Set</a> <a id="2022" href="IO.html#1998" class="Bound">b</a><a id="2023" class="Symbol">}</a> <a id="2025" class="Symbol">→</a>
       <a id="2034" class="Symbol">(</a><a id="2035" href="IO.html#2002" class="Bound">A</a> <a id="2037" class="Symbol">→</a> <a id="2039" href="IO.html#IO" class="Datatype">IO</a> <a id="2042" href="IO.html#2014" class="Bound">B</a><a id="2043" class="Symbol">)</a> <a id="2045" class="Symbol">→</a> <a id="2047" href="Data.Colist.html#Colist" class="Datatype">Colist</a> <a id="2054" href="IO.html#2002" class="Bound">A</a> <a id="2056" class="Symbol">→</a> <a id="2058" href="IO.html#IO" class="Datatype">IO</a> <a id="2061" class="Symbol">(</a><a id="2062" href="Data.Colist.html#Colist" class="Datatype">Colist</a> <a id="2069" href="IO.html#2014" class="Bound">B</a><a id="2070" class="Symbol">)</a>
<a id="2072" href="IO.html#mapM" class="Function">mapM</a> <a id="2077" href="IO.html#2077" class="Bound">f</a> <a id="2079" class="Symbol">=</a> <a id="2081" href="IO.html#sequence" class="Function">sequence</a> <a id="2090" href="Function.html#_%E2%88%98_" class="Function Operator">∘</a> <a id="2092" href="Data.Colist.html#map" class="Function">map</a> <a id="2096" href="IO.html#2077" class="Bound">f</a>

<a id="mapM′" href="IO.html#mapM%E2%80%B2" class="Function">mapM′</a> <a id="2105" class="Symbol">:</a> <a id="2107" class="Symbol">{</a><a id="2108" href="IO.html#2108" class="Bound">A</a> <a id="2110" href="IO.html#2110" class="Bound">B</a> <a id="2112" class="Symbol">:</a> <a id="2114" class="PrimitiveType">Set</a><a id="2117" class="Symbol">}</a> <a id="2119" class="Symbol">→</a> <a id="2121" class="Symbol">(</a><a id="2122" href="IO.html#2108" class="Bound">A</a> <a id="2124" class="Symbol">→</a> <a id="2126" href="IO.html#IO" class="Datatype">IO</a> <a id="2129" href="IO.html#2110" class="Bound">B</a><a id="2130" class="Symbol">)</a> <a id="2132" class="Symbol">→</a> <a id="2134" href="Data.Colist.html#Colist" class="Datatype">Colist</a> <a id="2141" href="IO.html#2108" class="Bound">A</a> <a id="2143" class="Symbol">→</a> <a id="2145" href="IO.html#IO" class="Datatype">IO</a> <a id="2148" class="Symbol">(</a><a id="2149" href="Level.html#Lift" class="Record">Lift</a> <a id="2154" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a><a id="2155" class="Symbol">)</a>
<a id="2157" href="IO.html#mapM%E2%80%B2" class="Function">mapM′</a> <a id="2163" href="IO.html#2163" class="Bound">f</a> <a id="2165" class="Symbol">=</a> <a id="2167" href="IO.html#sequence%E2%80%B2" class="Function">sequence′</a> <a id="2177" href="Function.html#_%E2%88%98_" class="Function Operator">∘</a> <a id="2179" href="Data.Colist.html#map" class="Function">map</a> <a id="2183" href="IO.html#2163" class="Bound">f</a>

<a id="2186" class="Comment">------------------------------------------------------------------------</a>
<a id="2259" class="Comment">-- Simple lazy IO</a>

<a id="2278" class="Comment">-- Note that the functions below produce commands which, when</a>
<a id="2340" class="Comment">-- executed, may raise exceptions.</a>

<a id="2376" class="Comment">-- Note also that the semantics of these functions depends on the</a>
<a id="2442" class="Comment">-- version of the Haskell base library. If the version is 4.2.0.0 (or</a>
<a id="2512" class="Comment">-- later?), then the functions use the character encoding specified by</a>
<a id="2583" class="Comment">-- the locale. For older versions of the library (going back to at</a>
<a id="2650" class="Comment">-- least version 3) the functions use ISO-8859-1.</a>

<a id="getContents" href="IO.html#getContents" class="Function">getContents</a> <a id="2713" class="Symbol">:</a> <a id="2715" href="IO.html#IO" class="Datatype">IO</a> <a id="2718" href="Data.String.html#Costring" class="Function">Costring</a>
<a id="2727" href="IO.html#getContents" class="Function">getContents</a> <a id="2739" class="Symbol">=</a> <a id="2741" href="IO.html#IO.lift" class="InductiveConstructor">lift</a> <a id="2746" href="IO.Primitive.html#getContents" class="Postulate">Prim.getContents</a>

<a id="readFile" href="IO.html#readFile" class="Function">readFile</a> <a id="2773" class="Symbol">:</a> <a id="2775" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="2782" class="Symbol">→</a> <a id="2784" href="IO.html#IO" class="Datatype">IO</a> <a id="2787" href="Data.String.html#Costring" class="Function">Costring</a>
<a id="2796" href="IO.html#readFile" class="Function">readFile</a> <a id="2805" href="IO.html#2805" class="Bound">f</a> <a id="2807" class="Symbol">=</a> <a id="2809" href="IO.html#IO.lift" class="InductiveConstructor">lift</a> <a id="2814" class="Symbol">(</a><a id="2815" href="IO.Primitive.html#readFile" class="Postulate">Prim.readFile</a> <a id="2829" href="IO.html#2805" class="Bound">f</a><a id="2830" class="Symbol">)</a>

<a id="2833" class="Comment">-- Reads a finite file. Raises an exception if the file path refers to</a>
<a id="2904" class="Comment">-- a non-physical file (like &quot;/dev/zero&quot;).</a>

<a id="readFiniteFile" href="IO.html#readFiniteFile" class="Function">readFiniteFile</a> <a id="2963" class="Symbol">:</a> <a id="2965" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="2972" class="Symbol">→</a> <a id="2974" href="IO.html#IO" class="Datatype">IO</a> <a id="2977" href="Agda.Builtin.String.html#String" class="Postulate">String</a>
<a id="2984" href="IO.html#readFiniteFile" class="Function">readFiniteFile</a> <a id="2999" href="IO.html#2999" class="Bound">f</a> <a id="3001" class="Symbol">=</a> <a id="3003" href="IO.html#IO.lift" class="InductiveConstructor">lift</a> <a id="3008" class="Symbol">(</a><a id="3009" href="IO.Primitive.html#readFiniteFile" class="Postulate">Prim.readFiniteFile</a> <a id="3029" href="IO.html#2999" class="Bound">f</a><a id="3030" class="Symbol">)</a>

<a id="writeFile∞" href="IO.html#writeFile%E2%88%9E" class="Function">writeFile∞</a> <a id="3044" class="Symbol">:</a> <a id="3046" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="3053" class="Symbol">→</a> <a id="3055" href="Data.String.html#Costring" class="Function">Costring</a> <a id="3064" class="Symbol">→</a> <a id="3066" href="IO.html#IO" class="Datatype">IO</a> <a id="3069" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a>
<a id="3071" href="IO.html#writeFile%E2%88%9E" class="Function">writeFile∞</a> <a id="3082" href="IO.html#3082" class="Bound">f</a> <a id="3084" href="IO.html#3084" class="Bound">s</a> <a id="3086" class="Symbol">=</a>
  <a id="3090" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="3092" href="IO.html#IO.lift" class="InductiveConstructor">lift</a> <a id="3097" class="Symbol">(</a><a id="3098" href="IO.Primitive.html#writeFile" class="Postulate">Prim.writeFile</a> <a id="3113" href="IO.html#3082" class="Bound">f</a> <a id="3115" href="IO.html#3084" class="Bound">s</a><a id="3116" class="Symbol">)</a> <a id="3118" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">&gt;&gt;</a>
  <a id="3123" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="3125" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="3132" class="Symbol">_</a>

<a id="writeFile" href="IO.html#writeFile" class="Function">writeFile</a> <a id="3145" class="Symbol">:</a> <a id="3147" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="3154" class="Symbol">→</a> <a id="3156" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="3163" class="Symbol">→</a> <a id="3165" href="IO.html#IO" class="Datatype">IO</a> <a id="3168" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a>
<a id="3170" href="IO.html#writeFile" class="Function">writeFile</a> <a id="3180" href="IO.html#3180" class="Bound">f</a> <a id="3182" href="IO.html#3182" class="Bound">s</a> <a id="3184" class="Symbol">=</a> <a id="3186" href="IO.html#writeFile%E2%88%9E" class="Function">writeFile∞</a> <a id="3197" href="IO.html#3180" class="Bound">f</a> <a id="3199" class="Symbol">(</a><a id="3200" href="Data.String.html#toCostring" class="Function">toCostring</a> <a id="3211" href="IO.html#3182" class="Bound">s</a><a id="3212" class="Symbol">)</a>

<a id="appendFile∞" href="IO.html#appendFile%E2%88%9E" class="Function">appendFile∞</a> <a id="3227" class="Symbol">:</a> <a id="3229" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="3236" class="Symbol">→</a> <a id="3238" href="Data.String.html#Costring" class="Function">Costring</a> <a id="3247" class="Symbol">→</a> <a id="3249" href="IO.html#IO" class="Datatype">IO</a> <a id="3252" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a>
<a id="3254" href="IO.html#appendFile%E2%88%9E" class="Function">appendFile∞</a> <a id="3266" href="IO.html#3266" class="Bound">f</a> <a id="3268" href="IO.html#3268" class="Bound">s</a> <a id="3270" class="Symbol">=</a>
  <a id="3274" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="3276" href="IO.html#IO.lift" class="InductiveConstructor">lift</a> <a id="3281" class="Symbol">(</a><a id="3282" href="IO.Primitive.html#appendFile" class="Postulate">Prim.appendFile</a> <a id="3298" href="IO.html#3266" class="Bound">f</a> <a id="3300" href="IO.html#3268" class="Bound">s</a><a id="3301" class="Symbol">)</a> <a id="3303" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">&gt;&gt;</a>
  <a id="3308" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="3310" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="3317" class="Symbol">_</a>

<a id="appendFile" href="IO.html#appendFile" class="Function">appendFile</a> <a id="3331" class="Symbol">:</a> <a id="3333" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="3340" class="Symbol">→</a> <a id="3342" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="3349" class="Symbol">→</a> <a id="3351" href="IO.html#IO" class="Datatype">IO</a> <a id="3354" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a>
<a id="3356" href="IO.html#appendFile" class="Function">appendFile</a> <a id="3367" href="IO.html#3367" class="Bound">f</a> <a id="3369" href="IO.html#3369" class="Bound">s</a> <a id="3371" class="Symbol">=</a> <a id="3373" href="IO.html#appendFile%E2%88%9E" class="Function">appendFile∞</a> <a id="3385" href="IO.html#3367" class="Bound">f</a> <a id="3387" class="Symbol">(</a><a id="3388" href="Data.String.html#toCostring" class="Function">toCostring</a> <a id="3399" href="IO.html#3369" class="Bound">s</a><a id="3400" class="Symbol">)</a>

<a id="putStr∞" href="IO.html#putStr%E2%88%9E" class="Function">putStr∞</a> <a id="3411" class="Symbol">:</a> <a id="3413" href="Data.String.html#Costring" class="Function">Costring</a> <a id="3422" class="Symbol">→</a> <a id="3424" href="IO.html#IO" class="Datatype">IO</a> <a id="3427" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a>
<a id="3429" href="IO.html#putStr%E2%88%9E" class="Function">putStr∞</a> <a id="3437" href="IO.html#3437" class="Bound">s</a> <a id="3439" class="Symbol">=</a>
  <a id="3443" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="3445" href="IO.html#IO.lift" class="InductiveConstructor">lift</a> <a id="3450" class="Symbol">(</a><a id="3451" href="IO.Primitive.html#putStr" class="Postulate">Prim.putStr</a> <a id="3463" href="IO.html#3437" class="Bound">s</a><a id="3464" class="Symbol">)</a> <a id="3466" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">&gt;&gt;</a>
  <a id="3471" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="3473" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="3480" class="Symbol">_</a>

<a id="putStr" href="IO.html#putStr" class="Function">putStr</a> <a id="3490" class="Symbol">:</a> <a id="3492" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="3499" class="Symbol">→</a> <a id="3501" href="IO.html#IO" class="Datatype">IO</a> <a id="3504" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a>
<a id="3506" href="IO.html#putStr" class="Function">putStr</a> <a id="3513" href="IO.html#3513" class="Bound">s</a> <a id="3515" class="Symbol">=</a> <a id="3517" href="IO.html#putStr%E2%88%9E" class="Function">putStr∞</a> <a id="3525" class="Symbol">(</a><a id="3526" href="Data.String.html#toCostring" class="Function">toCostring</a> <a id="3537" href="IO.html#3513" class="Bound">s</a><a id="3538" class="Symbol">)</a>

<a id="putStrLn∞" href="IO.html#putStrLn%E2%88%9E" class="Function">putStrLn∞</a> <a id="3551" class="Symbol">:</a> <a id="3553" href="Data.String.html#Costring" class="Function">Costring</a> <a id="3562" class="Symbol">→</a> <a id="3564" href="IO.html#IO" class="Datatype">IO</a> <a id="3567" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a>
<a id="3569" href="IO.html#putStrLn%E2%88%9E" class="Function">putStrLn∞</a> <a id="3579" href="IO.html#3579" class="Bound">s</a> <a id="3581" class="Symbol">=</a>
  <a id="3585" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="3587" href="IO.html#IO.lift" class="InductiveConstructor">lift</a> <a id="3592" class="Symbol">(</a><a id="3593" href="IO.Primitive.html#putStrLn" class="Postulate">Prim.putStrLn</a> <a id="3607" href="IO.html#3579" class="Bound">s</a><a id="3608" class="Symbol">)</a> <a id="3610" href="IO.html#IO._%3E%3E_" class="InductiveConstructor Operator">&gt;&gt;</a>
  <a id="3615" href="Agda.Builtin.Coinduction.html#%E2%99%AF_" class="CoinductiveConstructor Operator">♯</a> <a id="3617" href="IO.html#IO.return" class="InductiveConstructor">return</a> <a id="3624" class="Symbol">_</a>

<a id="putStrLn" href="IO.html#putStrLn" class="Function">putStrLn</a> <a id="3636" class="Symbol">:</a> <a id="3638" href="Agda.Builtin.String.html#String" class="Postulate">String</a> <a id="3645" class="Symbol">→</a> <a id="3647" href="IO.html#IO" class="Datatype">IO</a> <a id="3650" href="Agda.Builtin.Unit.html#%E2%8A%A4" class="Record">⊤</a>
<a id="3652" href="IO.html#putStrLn" class="Function">putStrLn</a> <a id="3661" href="IO.html#3661" class="Bound">s</a> <a id="3663" class="Symbol">=</a> <a id="3665" href="IO.html#putStrLn%E2%88%9E" class="Function">putStrLn∞</a> <a id="3675" class="Symbol">(</a><a id="3676" href="Data.String.html#toCostring" class="Function">toCostring</a> <a id="3687" href="IO.html#3661" class="Bound">s</a><a id="3688" class="Symbol">)</a>
</pre></body></html>